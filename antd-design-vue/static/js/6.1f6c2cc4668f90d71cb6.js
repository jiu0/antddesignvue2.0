webpackJsonp([6],{"1Z5i":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=null,o=null,s={name:"addHospital",data:function(){return{mapName:"",mapPointName:"",loading:!0,mapGetshow:!0,dialogName:""}},destroyed:function(){window.removeEventListener("keydown",this.keyDown,!1)},mounted:function(){var e=this;window.addEventListener("keydown",this.keyDown),this.$nextTick(function(){e.addClassParent(),e.getParentDom(),e.loadStyleString(".addHostParent:before{content:'';position:absolute;top:0;bottom:0;left:0;right:0;background-color:rgba(55,55,55,.6);z-index:1000;pointer-events:none;}"),e.removeClassParent()})},beforeRouteLeave:function(e,t,a){"/bmsearchlocation"!==e.path?this.removeClass(this.$refs.addHospital.parentNode,"addHostParent"):this.addClass(this.$refs.addHospital.parentNode,"addHostParent"),a()},created:function(){this.mapBuild()},methods:{removeClassParent:function(){var e=this;this.$refs.addHospital.parentNode&&setTimeout(function(){console.log("this",e),e.removeClass(e.$refs.addHospital.parentNode,"addHostParent")},5e3)},addClass:function(e,t){e.className+=" "+t},keyDown:function(e){13===e.keyCode&&this.mapNameChange()},addClassParent:function(){this.$refs.addHospital.parentNode.setAttribute("pointer-events","auto")},loadStyleString:function(e){var t=document.createElement("style");try{t.appendChild(document.createTextNode(e))}catch(a){t.styleSheet.cssText=e}document.getElementsByTagName("head")[0].appendChild(t)},getParentDom:function(){var e=this.$refs.addHospital.parentNode;e.style.position="relative",e.className="addHostParent"},hasClass:function(e,t){return!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},removeClass:function(e,t){this.hasClass(e,t)&&(e.className=e.className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," "))},mapNameChange:function(){var e=this,t=void 0,a=null,s=new BMap.LocalSearch(n,{renderOptions:{map:n},onSearchComplete:function(i){void 0!=s.getResults()?(n.clearOverlays(),s.getResults().getPoi(0)?(t=s.getResults().getPoi(0).point,n.centerAndZoom(t,10),a=new BMap.Marker(t),n.addOverlay(a),a.enableDragging(),o.getLocation(t,function(t){var a=t.addressComponents;console.log(a),e.mapPointName=a.province+", "+a.city+", "+a.district+", "+a.street+", "+a.streetNumber})):alert("未匹配到地点!可拖动地图上的红色图标到精确位置")):alert("未找到搜索结果")}});s.search(this.mapName)},mapBuild:function(){var e=this;setTimeout(function(){if(e.mapGetshow){n=new BMap.Map("container"),o=new BMap.Geocoder;var t=new BMap.Point(116.3964,39.9093);n.centerAndZoom(t,10),n.enableScrollWheelZoom(),(new BMap.Geolocation).getCurrentPosition(function(t){console.log(t);var a=new BMap.Marker(t.point);n.addOverlay(a),n.panTo(t.point),o.getLocation(t.point,function(t){var a=t.addressComponents;console.log(a),e.mapPointName=a.province+a.city+a.district+a.street+a.streetNumber,e.loading=!1,e.mapGetshow=!1})},{enableHighAccuracy:!0}),n.addEventListener("click",function(t){console.log(t);var a=t.point,s=new BMap.Marker(a);n.clearOverlays(),n.addOverlay(s),o.getLocation(a,function(t){var a=t.addressComponents;console.log(a),e.mapPointName=a.province+a.city+a.district+a.street+a.streetNumber})})}},1e3)}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"addHospital"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"map"},[a("a-input",{staticClass:"input-with-select",staticStyle:{color:"blue",width:"93%"},attrs:{placeholder:"请输入搜索地址"},model:{value:e.mapName,callback:function(t){e.mapName=t},expression:"mapName"}}),e._v(" "),a("a-button",{attrs:{slot:"append",type:"primary",icon:"el-icon-search"},on:{click:e.mapNameChange,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.mapNameChange.apply(null,arguments)}},slot:"append"},[e._v("搜索")]),e._v(" "),e.mapPointName?a("div",{staticStyle:{padding:"10px 0"}},[e._v("当前选中："+e._s(e.mapPointName))]):e._e(),e._v(" "),a("div",{ref:"allmap",staticStyle:{height:"400px",width:"100%"},attrs:{id:"container"}})],1)])},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(e){a("PdW1")},"data-v-66218d5e",null);t.default=r.exports},PdW1:function(e,t){}});